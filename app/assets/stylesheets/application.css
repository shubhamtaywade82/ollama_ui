@tailwind base;
@tailwind components;
@tailwind utilities;

/* Theme Variables */
.theme-light {
  --bg-primary: #f9fafb;
  --bg-secondary: #ffffff;
  --bg-tertiary: #f3f4f6;
  --border-color: #e5e7eb;
  --text-primary: #111827;
  --text-secondary: #6b7280;
  --text-tertiary: #9ca3af;
  --accent-primary: #9333ea;
  --accent-secondary: #3b82f6;
  --shadow: rgba(0, 0, 0, 0.1);
  /* RGB values for transparency */
  --bg-secondary-rgb: 255, 255, 255;
  --accent-primary-rgb: 147, 51, 234;
}

.theme-dark {
  --bg-primary: #111827;
  --bg-secondary: #1f2937;
  --bg-tertiary: #374151;
  --border-color: #4b5563;
  --text-primary: #f9fafb;
  --text-secondary: #d1d5db;
  --text-tertiary: #9ca3af;
  --accent-primary: #a855f7;
  --accent-secondary: #60a5fa;
  --shadow: rgba(0, 0, 0, 0.3);
  /* RGB values for transparency */
  --bg-secondary-rgb: 31, 41, 55;
  --accent-primary-rgb: 168, 85, 247;
}

.theme-blue {
  --bg-primary: #eff6ff;
  --bg-secondary: #dbeafe;
  --bg-tertiary: #bfdbfe;
  --border-color: #93c5fd;
  --text-primary: #1e3a8a;
  --text-secondary: #3b82f6;
  --text-tertiary: #60a5fa;
  --accent-primary: #2563eb;
  --accent-secondary: #1d4ed8;
  --shadow: rgba(37, 99, 235, 0.2);
  --bg-secondary-rgb: 219, 234, 254;
  --accent-primary-rgb: 37, 99, 235;
}

.theme-green {
  --bg-primary: #f0fdf4;
  --bg-secondary: #dcfce7;
  --bg-tertiary: #bbf7d0;
  --border-color: #86efac;
  --text-primary: #14532d;
  --text-secondary: #16a34a;
  --text-tertiary: #22c55e;
  --accent-primary: #10b981;
  --accent-secondary: #059669;
  --shadow: rgba(16, 185, 129, 0.2);
  --bg-secondary-rgb: 220, 252, 231;
  --accent-primary-rgb: 16, 185, 129;
}

.theme-purple {
  --bg-primary: #faf5ff;
  --bg-secondary: #f3e8ff;
  --bg-tertiary: #e9d5ff;
  --border-color: #d8b4fe;
  --text-primary: #581c87;
  --text-secondary: #9333ea;
  --text-tertiary: #a855f7;
  --accent-primary: #9333ea;
  --accent-secondary: #7e22ce;
  --shadow: rgba(147, 51, 234, 0.2);
  --bg-secondary-rgb: 243, 232, 255;
  --accent-primary-rgb: 147, 51, 234;
}

.theme-orange {
  --bg-primary: #fff7ed;
  --bg-secondary: #ffedd5;
  --bg-tertiary: #fed7aa;
  --border-color: #fdba74;
  --text-primary: #9a3412;
  --text-secondary: #ea580c;
  --text-tertiary: #f97316;
  --accent-primary: #f97316;
  --accent-secondary: #ea580c;
  --shadow: rgba(249, 115, 22, 0.2);
  --bg-secondary-rgb: 255, 237, 213;
  --accent-primary-rgb: 249, 115, 22;
}

.theme-red {
  --bg-primary: #fef2f2;
  --bg-secondary: #fee2e2;
  --bg-tertiary: #fecaca;
  --border-color: #fca5a5;
  --text-primary: #991b1b;
  --text-secondary: #dc2626;
  --text-tertiary: #ef4444;
  --accent-primary: #ef4444;
  --accent-secondary: #dc2626;
  --shadow: rgba(239, 68, 68, 0.2);
  --bg-secondary-rgb: 254, 226, 226;
  --accent-primary-rgb: 239, 68, 68;
}

/* Apply theme colors using CSS variables */
.theme-light,
.theme-dark,
.theme-blue,
.theme-green,
.theme-purple,
.theme-orange,
.theme-red {
  background-color: var(--bg-primary);
  color: var(--text-primary);
}

.theme-light [data-theme-bg-secondary],
.theme-dark [data-theme-bg-secondary],
.theme-blue [data-theme-bg-secondary],
.theme-green [data-theme-bg-secondary],
.theme-purple [data-theme-bg-secondary],
.theme-orange [data-theme-bg-secondary],
.theme-red [data-theme-bg-secondary] {
  background-color: var(--bg-secondary);
  border-color: var(--border-color);
}

.theme-light [data-theme-bg-tertiary],
.theme-dark [data-theme-bg-tertiary],
.theme-blue [data-theme-bg-tertiary],
.theme-green [data-theme-bg-tertiary],
.theme-purple [data-theme-bg-tertiary],
.theme-orange [data-theme-bg-tertiary],
.theme-red [data-theme-bg-tertiary] {
  background-color: var(--bg-tertiary);
}

.theme-light [data-theme-text-primary],
.theme-dark [data-theme-text-primary],
.theme-blue [data-theme-text-primary],
.theme-green [data-theme-text-primary],
.theme-purple [data-theme-text-primary],
.theme-orange [data-theme-text-primary],
.theme-red [data-theme-text-primary] {
  color: var(--text-primary);
}

.theme-light [data-theme-text-secondary],
.theme-dark [data-theme-text-secondary],
.theme-blue [data-theme-text-secondary],
.theme-green [data-theme-text-secondary],
.theme-purple [data-theme-text-secondary],
.theme-orange [data-theme-text-secondary],
.theme-red [data-theme-text-secondary] {
  color: var(--text-secondary);
}

.theme-light [data-theme-text-tertiary],
.theme-dark [data-theme-text-tertiary],
.theme-blue [data-theme-text-tertiary],
.theme-green [data-theme-text-tertiary],
.theme-purple [data-theme-text-tertiary],
.theme-orange [data-theme-text-tertiary],
.theme-red [data-theme-text-tertiary] {
  color: var(--text-tertiary);
}

.theme-light [data-theme-accent],
.theme-dark [data-theme-accent],
.theme-blue [data-theme-accent],
.theme-green [data-theme-accent],
.theme-purple [data-theme-accent],
.theme-orange [data-theme-accent],
.theme-red [data-theme-accent] {
  background-color: var(--accent-primary);
}

.theme-light [data-theme-accent-text],
.theme-dark [data-theme-accent-text],
.theme-blue [data-theme-accent-text],
.theme-green [data-theme-accent-text],
.theme-purple [data-theme-accent-text],
.theme-orange [data-theme-accent-text],
.theme-red [data-theme-accent-text] {
  color: var(--accent-primary);
}

/* Enhanced Message Content Styling */
.message-content {
  color: var(--text-primary) !important;
  line-height: 1.7;
  font-size: 0.9375rem;
}

.message-bubble-assistant .message-content {
  color: var(--text-primary) !important;
  background-color: transparent !important;
}

.message-bubble-assistant .message-content * {
  color: var(--text-primary) !important;
}

.message-bubble-assistant .message-content p {
  color: var(--text-primary) !important;
}

.message-bubble-assistant .message-content h1,
.message-bubble-assistant .message-content h2,
.message-bubble-assistant .message-content h3,
.message-bubble-assistant .message-content h4,
.message-bubble-assistant .message-content h5,
.message-bubble-assistant .message-content h6 {
  color: var(--text-primary) !important;
}

.message-content p {
  margin-bottom: 1rem;
  line-height: 1.7;
}

.message-content p:last-child {
  margin-bottom: 0;
}

.message-content h1,
.message-content h2,
.message-content h3,
.message-content h4,
.message-content h5,
.message-content h6 {
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
  font-weight: 600;
  line-height: 1.3;
  color: var(--text-primary) !important;
}

.message-content h1 {
  font-size: 1.5rem;
  border-bottom: 2px solid var(--border-color);
  padding-bottom: 0.5rem;
}

.message-content h2 {
  font-size: 1.25rem;
  margin-top: 1.25rem;
}

.message-content h3 {
  font-size: 1.125rem;
}

/* Prose styling for dark mode compatibility - Enhanced */
.prose {
  color: var(--text-primary) !important;
  font-size: 0.9375rem;
  line-height: 1.7;
  max-width: 100%;
}

/* Force all prose text to use theme colors */
.prose,
.prose * {
  color: var(--text-primary) !important;
}

.prose p,
.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6,
.prose strong,
.prose em,
.prose blockquote,
.prose ul,
.prose ol,
.prose li,
.prose td,
.prose th,
.prose div,
.prose span {
  color: var(--text-primary) !important;
}

.prose a {
  color: var(--accent-primary) !important;
  text-decoration: underline;
  text-underline-offset: 2px;
  transition: opacity 0.2s;
}

.prose a:hover {
  opacity: 0.8;
}

.prose code:not(pre code) {
  background-color: var(--bg-tertiary) !important;
  color: var(--accent-primary) !important;
  padding: 0.25rem 0.5rem;
  border-radius: 0.375rem;
  font-size: 0.875em;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;
  border: 1px solid var(--border-color);
}

.prose pre {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
  padding: 1.25rem;
  border-radius: 0.75rem;
  border: 1px solid var(--border-color);
  overflow-x: auto;
  margin: 1rem 0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.prose pre code {
  background-color: transparent !important;
  color: var(--text-primary) !important;
  padding: 0;
  border: none;
  font-size: 0.875rem;
  line-height: 1.6;
}

.prose blockquote {
  border-left: 3px solid var(--accent-primary) !important;
  color: var(--text-secondary) !important;
  padding-left: 1.25rem;
  margin: 1rem 0;
  font-style: italic;
  background-color: var(--bg-tertiary);
  padding: 0.75rem 1.25rem;
  border-radius: 0.5rem;
}

.prose ul,
.prose ol {
  margin: 1rem 0;
  padding-left: 1.75rem;
}

.prose li {
  margin: 0.5rem 0;
  line-height: 1.6;
}

.prose strong {
  font-weight: 600;
  color: var(--text-primary) !important;
}

.prose table {
  width: 100%;
  border-collapse: collapse;
  margin: 1rem 0;
  border: 1px solid var(--border-color);
  border-radius: 0.5rem;
  overflow: hidden;
}

.prose table th,
.prose table td {
  padding: 0.75rem;
  border-bottom: 1px solid var(--border-color);
  text-align: left;
}

.prose table th {
  background-color: var(--bg-tertiary);
  font-weight: 600;
}

.prose table tr:last-child td {
  border-bottom: none;
}

/* Responsive Utilities */
@media (max-width: 640px) {
  .prose {
    font-size: 0.875rem;
  }
  .prose ul, .prose ol {
    padding-left: 1.25rem;
  }
}

/* Enhanced Animations */
@keyframes fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slide-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-fade-in {
  animation: fade-in 0.4s ease-out;
}

.animate-slide-up {
  animation: slide-up 0.4s ease-out;
}

.animate-scale-in {
  animation: scale-in 0.3s ease-out;
}

/* Enhanced JSON and Code Block Styling */
.message-content pre[class*="language-"],
.message-content pre {
  background: var(--bg-tertiary) !important;
  border: 1px solid var(--border-color) !important;
  border-radius: 0.75rem !important;
  padding: 1.25rem !important;
  margin: 1.25rem 0 !important;
  overflow-x: auto !important;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace !important;
  font-size: 0.875rem !important;
  line-height: 1.6 !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

.message-bubble-assistant .message-content pre {
  background: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
}

.message-content pre code {
  background: transparent !important;
  padding: 0 !important;
  border: none !important;
  color: var(--text-primary) !important;
  font-size: inherit !important;
}

.message-bubble-assistant .message-content pre code {
  color: var(--text-primary) !important;
}

.message-content code:not(pre code) {
  background-color: var(--bg-tertiary) !important;
  color: var(--accent-primary) !important;
  padding: 0.25rem 0.5rem !important;
  border-radius: 0.375rem !important;
  font-size: 0.875em !important;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace !important;
  border: 1px solid var(--border-color) !important;
}

/* JSON-specific styling */
.message-content pre code.language-json {
  color: var(--text-primary) !important;
}

/* Better list formatting */
.message-content ul,
.message-content ol {
  margin: 1rem 0;
  padding-left: 1.75rem;
}

.message-content li {
  margin: 0.5rem 0;
  line-height: 1.6;
}

.message-content li::marker {
  color: var(--accent-primary);
}

/* Better table formatting */
.message-content table {
  width: 100%;
  border-collapse: collapse;
  margin: 1.25rem 0;
  border: 1px solid var(--border-color);
  border-radius: 0.5rem;
  overflow: hidden;
  background-color: var(--bg-secondary);
}

.message-content table th,
.message-content table td {
  padding: 0.75rem 1rem;
  border-bottom: 1px solid var(--border-color);
  text-align: left;
}

.message-content table th {
  background-color: var(--bg-tertiary);
  font-weight: 600;
  color: var(--text-primary);
}

.message-content table tr:last-child td {
  border-bottom: none;
}

.message-content table tr:hover {
  background-color: var(--bg-tertiary);
}

/* Error Message Display */
.error-message {
  animation: fadeIn 0.3s ease-in;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(-5px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Tool Call Display Component */
.tool-call-display {
  border: 1px solid var(--border-color);
  background-color: var(--bg-tertiary);
  border-radius: 0.5rem;
  overflow: hidden;
  margin: 0.5rem 0;
}

.tool-call-header {
  background-color: var(--bg-secondary);
  padding: 0.5rem 0.75rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
  transition: opacity 0.2s;
  border: none;
  width: 100%;
  text-align: left;
}

.tool-call-header:hover {
  opacity: 0.8;
}

.tool-call-arrow {
  width: 1rem;
  height: 1rem;
  transition: transform 0.2s;
  color: var(--text-secondary);
}

.tool-call-content {
  padding: 0.75rem;
  background-color: var(--bg-tertiary);
}

.tool-call-content pre {
  margin: 0;
  padding: 0.5rem;
  background-color: var(--bg-primary);
  border-radius: 0.25rem;
  font-size: 0.75rem;
  line-height: 1.5;
  overflow-x: auto;
  color: var(--text-primary);
  border: 1px solid var(--border-color);
}

/* Custom Scrollbar */
.scrollbar-thin::-webkit-scrollbar {
  width: 6px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background: transparent;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background-color: var(--border-color);
  border-radius: 3px;
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background-color: var(--text-tertiary);
}

/* Smooth Transitions */
* {
  transition-property: color, background-color, border-color, opacity, transform, box-shadow;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: 150ms;
}

/* Professional Typography Scale - Refined */
.text-display {
  font-size: 1.875rem;
  line-height: 2.25rem;
  font-weight: 600;
  letter-spacing: -0.02em;
}

.text-heading {
  font-size: 1.25rem;
  line-height: 1.75rem;
  font-weight: 600;
  letter-spacing: -0.01em;
}

.text-subheading {
  font-size: 1rem;
  line-height: 1.5rem;
  font-weight: 500;
}

.text-body {
  font-size: 0.875rem;
  line-height: 1.5rem;
}

.text-small {
  font-size: 0.8125rem;
  line-height: 1.375rem;
}

.text-xs-refined {
  font-size: 0.75rem;
  line-height: 1.25rem;
}

/* Enhanced Spacing System */
.space-section {
  padding: 2rem 1.5rem;
}

.space-component {
  padding: 1rem;
}

.space-tight {
  padding: 0.5rem;
}

/* Professional Shadows */
.shadow-elevated {
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
}

.shadow-interactive {
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

.shadow-hover {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

.shadow-focus {
  box-shadow: 0 0 0 3px rgba(var(--accent-primary-rgb), 0.1);
}

/* Refined Borders */
.border-subtle {
  border-width: 1px;
  border-color: var(--border-color);
}

.border-emphasis {
  border-width: 1.5px;
  border-color: var(--border-color);
}

/* Button Base Styles - Refined */
.btn-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 500;
  border-radius: 0.375rem;
  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  cursor: pointer;
  border: none;
  outline: none;
  font-size: 0.8125rem;
}

.btn-base:focus-visible {
  outline: 2px solid var(--accent-primary);
  outline-offset: 1px;
}

.btn-base:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn-primary {
  background: var(--accent-primary);
  color: white;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05), 0 0 0 1px rgba(0, 0, 0, 0.05) inset;
}

.btn-primary:hover:not(:disabled) {
  background: var(--accent-secondary);
  box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(0, 0, 0, 0.05) inset;
}

.btn-primary:active:not(:disabled) {
  transform: scale(0.98);
}

.btn-secondary {
  background-color: var(--bg-secondary);
  color: var(--text-primary);
  border: 1px solid var(--border-color);
}

.btn-secondary:hover:not(:disabled) {
  background-color: var(--bg-tertiary);
  border-color: var(--border-color);
}

/* Input Base Styles - Refined */
.input-base {
  width: 100%;
  background-color: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 0.375rem;
  color: var(--text-primary);
  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  font-size: 0.875rem;
}

.input-base:focus {
  outline: none;
  border-color: var(--accent-primary);
  box-shadow: 0 0 0 2px rgba(var(--accent-primary-rgb), 0.1);
}

.input-base::placeholder {
  color: var(--text-tertiary);
  font-size: 0.875rem;
}

/* Modern Card Styles */
.card-base {
  background-color: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 0.75rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.card-interactive {
  cursor: pointer;
}

.card-interactive:hover {
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  transform: translateY(-2px);
  border-color: var(--accent-primary);
}

/* Modern Message Bubbles */
.message-bubble {
  border-radius: 1rem;
  padding: 0.875rem 1.125rem;
  max-width: 80%;
  word-wrap: break-word;
  overflow-wrap: break-word;
  position: relative;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  transition: all 0.2s ease;
}

.message-bubble:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
}

.message-bubble-user {
  background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
  color: white;
  margin-left: auto;
  border-bottom-right-radius: 0.375rem;
  box-shadow: 0 4px 12px rgba(var(--accent-primary-rgb), 0.3);
}

.message-bubble-user:hover {
  box-shadow: 0 6px 16px rgba(var(--accent-primary-rgb), 0.4);
  transform: translateY(-1px);
}

.message-bubble-user .message-content {
  word-wrap: break-word;
  overflow-wrap: break-word;
  color: white;
  font-weight: 400;
}

.message-bubble-assistant {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  border: 1px solid var(--border-color) !important;
  margin-right: auto;
  border-bottom-left-radius: 0.375rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
}

/* Force all text inside assistant bubbles to use theme colors */
.message-bubble-assistant,
.message-bubble-assistant * {
  color: var(--text-primary) !important;
}

.message-bubble-assistant p,
.message-bubble-assistant div,
.message-bubble-assistant span,
.message-bubble-assistant li,
.message-bubble-assistant td,
.message-bubble-assistant th {
  color: var(--text-primary) !important;
}

.message-bubble-assistant:hover {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  transform: translateY(-1px);
}

/* Modern Avatar */
.avatar {
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  font-size: 1rem;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.avatar:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* Header Enhancements - Refined */
.header-refined {
  backdrop-filter: blur(8px) saturate(180%);
  -webkit-backdrop-filter: blur(8px) saturate(180%);
  background-color: rgba(var(--bg-secondary-rgb), 0.85);
  border-bottom: 1px solid var(--border-color);
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}

/* Input Container Enhancements - Refined */
.input-container {
  background-color: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 1rem;
  padding: 0.5rem 0.875rem;
  transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}

.input-container:focus-within {
  border-color: var(--accent-primary);
  box-shadow: 0 0 0 2px rgba(var(--accent-primary-rgb), 0.1), 0 2px 4px 0 rgba(0, 0, 0, 0.05);
}

/* Modern Scrollbar */
.scrollbar-modern::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.scrollbar-modern::-webkit-scrollbar-track {
  background: transparent;
  border-radius: 4px;
}

.scrollbar-modern::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #cbd5e1, #94a3b8);
  border-radius: 4px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

.scrollbar-modern::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, #94a3b8, #64748b);
}

.dark .scrollbar-modern::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, #475569, #334155);
}

.dark .scrollbar-modern::-webkit-scrollbar-thumb:hover {
  background: linear-gradient(135deg, #334155, #1e293b);
}

/* Refined Scrollbar (Legacy Support) */
.scrollbar-refined::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

.scrollbar-refined::-webkit-scrollbar-track {
  background: transparent;
  border-radius: 4px;
}

.scrollbar-refined::-webkit-scrollbar-thumb {
  background-color: var(--border-color);
  border-radius: 4px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

.scrollbar-refined::-webkit-scrollbar-thumb:hover {
  background-color: var(--text-tertiary);
}

/* Loading States */
.loading-skeleton {
  background: linear-gradient(
    90deg,
    var(--bg-tertiary) 25%,
    var(--bg-secondary) 50%,
    var(--bg-tertiary) 75%
  );
  background-size: 200% 100%;
  animation: loading 1.5s ease-in-out infinite;
}

@keyframes loading {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* Focus Visible for Accessibility */
.focus-visible-ring:focus-visible {
  outline: 2px solid var(--accent-primary);
  outline-offset: 2px;
  border-radius: 0.25rem;
}

/* Focus Styles */
textarea:focus,
input:focus,
button:focus {
  outline: none;
  ring-width: 2px;
  ring-color: var(--accent-primary);
  ring-offset-width: 2px;
}

/* Mobile Optimizations */
@media (max-width: 1024px) {
  /* Improve touch targets */
  button, a {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Enhanced Mobile Responsiveness */
@media (max-width: 640px) {
  /* Smaller text on mobile */
  .text-display {
    font-size: 1.5rem;
    line-height: 2rem;
  }

  .text-heading {
    font-size: 1.125rem;
    line-height: 1.5rem;
  }

  /* Better spacing on mobile */
  .space-section {
    padding: 1.5rem 1rem;
  }

  /* Message bubbles full width on mobile */
  .message-bubble {
    max-width: 95%;
  }

  /* Compact header on mobile */
  .header-refined {
    padding: 0.5rem 0.75rem;
  }

  /* Better input containers on mobile */
  .input-container {
    padding: 0.375rem 0.75rem;
  }

  /* Sidebar overlay for mobile */
  [data-trading-chat-target="sidebarOverlay"] {
    display: none;
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
  }

  /* Better message spacing on mobile */
  .message-bubble {
    padding: 0.5rem 0.75rem;
  }

  /* Compact avatar on mobile */
  .avatar {
    width: 1.75rem;
    height: 1.75rem;
    font-size: 0.75rem;
  }
}

/* Tablet optimizations */
@media (min-width: 641px) and (max-width: 1024px) {
  .message-bubble {
    max-width: 85%;
  }
}

/* Better touch targets for interactive elements */
@media (hover: none) and (pointer: coarse) {
  button, a, input, select, textarea {
    min-height: 44px;
  }

  .btn-base {
    min-height: 44px;
    padding: 0.5rem 1rem;
  }

  /* Larger tap targets for mobile */
  .copy-button {
    min-width: 44px;
    min-height: 44px;
  }
}

/* Glassmorphism Effects */
.glass-header {
  background-color: var(--bg-secondary);
  opacity: 0.95;
  backdrop-filter: blur(12px) saturate(180%);
  -webkit-backdrop-filter: blur(12px) saturate(180%);
  border-bottom: 1px solid var(--border-color);
}

.glass-card {
  background-color: var(--bg-secondary);
  opacity: 0.9;
  backdrop-filter: blur(8px) saturate(180%);
  -webkit-backdrop-filter: blur(8px) saturate(180%);
  border: 1px solid var(--border-color);
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

.glass-card[data-theme-accent] {
  background-color: var(--accent-primary);
  opacity: 0.2;
}

.glass-input {
  background-color: var(--bg-secondary);
  opacity: 0.8;
  backdrop-filter: blur(8px) saturate(180%);
  -webkit-backdrop-filter: blur(8px) saturate(180%);
}

/* Micro-interactions */
@keyframes pulse-glow {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(var(--accent-primary-rgb), 0.4);
  }
  50% {
    box-shadow: 0 0 0 4px rgba(var(--accent-primary-rgb), 0);
  }
}

.animate-pulse-glow {
  animation: pulse-glow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Enhanced Hover Effects */
.hover-lift {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.hover-lift:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

/* Compact Typography */
.text-compact {
  font-size: 0.75rem;
  line-height: 1.4;
}

/* Status Indicators */
.status-indicator {
  display: inline-block;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  margin-right: 4px;
}

.status-indicator.active {
  background-color: #10b981;
  box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.2);
}

.status-indicator.inactive {
  background-color: #6b7280;
}

/* Welcome Screen Centered Layout */
[data-trading-chat-target="welcomeScreen"] {
  min-height: calc(100vh - 120px);
}

/* Centered Input Box Styling */
[data-trading-chat-target="promptCentered"] {
  font-size: 0.875rem;
  line-height: 1.5;
}

[data-trading-chat-target="promptCentered"]:focus {
  outline: none;
}

/* Smooth input container transitions */
.glass-card[data-trading-chat-target] {
  transition: all 0.2s ease;
}

.glass-card[data-trading-chat-target]:focus-within {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  border-color: var(--accent-primary);
}

/* Example Buttons Hover Effect */
[data-action*="useExample"]:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

/* Smooth Transitions for Welcome Screen */
[data-trading-chat-target="welcomeScreen"].hidden {
  display: none;
}

[data-trading-chat-target="messages"].hidden {
  display: none;
}

/* Select/Dropdown Styling */
select {
  appearance: none !important;
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-color) !important;
}

select::-ms-expand {
  display: none !important;
}

select option {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  padding: 0.5rem !important;
}

select:focus {
  outline: none !important;
  border-color: var(--accent-primary) !important;
  box-shadow: 0 0 0 2px rgba(var(--accent-primary-rgb), 0.1) !important;
}

/* Select dropdown arrow styling - Light theme */
select {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3E%3C/svg%3E") !important;
  background-position: right 0.5rem center !important;
  background-repeat: no-repeat !important;
  background-size: 1.25em 1.25em !important;
  padding-right: 2rem !important;
}

/* Dark theme arrow color - lighter gray */
.theme-dark select {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%9ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3E%3C/svg%3E") !important;
}

/* Print Styles */
@media print {
  .no-print {
    display: none !important;
  }
}

